"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react/jsx-runtime"),S=require("react"),a=require("@floating-ui/react-dom"),y=require("styled-components"),j=require("../hooks/useIntersection.cjs"),u=require("../Box/Box.cjs"),_=require("../Portal/Portal.cjs"),k=e=>e&&e.__esModule?e:{default:e};function v(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const i=v(S),f=k(y),O=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"],$=f.default(u.Box)`
  box-shadow: ${({theme:e})=>e.shadows.filterShadow};
  z-index: ${({theme:e})=>e.zIndices[0]};
  border: 1px solid ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
`,p=({source:e,children:t,spacing:r=0,fullWidth:o=!1,placement:n="bottom-start",centered:l=!1,...c})=>{const[h,g]=i.useState(void 0),{x:m,y:x,reference:d,floating:w,strategy:P}=a.useFloating({strategy:"fixed",placement:l?"bottom":n,middleware:[a.offset({mainAxis:r}),a.shift(),a.flip()],whileElementsMounted:a.autoUpdate});return i.useLayoutEffect(()=>{d(e.current)},[e,d]),i.useLayoutEffect(()=>{o&&g(e.current.offsetWidth)},[o,e]),s.jsx($,{ref:w,style:{left:m,top:x,position:P,width:h||void 0},hasRadius:!0,background:"neutral0",padding:1,...c,children:t})},b=({children:e,intersectionId:t,onReachEnd:r,...o})=>{const n=i.useRef(null);return j.useIntersection(n,r??(()=>{}),{selectorToWatch:`#${CSS.escape(t??"")}`,skipWhen:!t||!r}),s.jsxs(q,{ref:n,...o,children:[e,t&&r&&s.jsx(u.Box,{id:CSS.escape(t),width:"100%",height:"1px"})]})},q=f.default(u.Box)`
  // 16 is base base size, 3 is the factor to get closer to 40px and 5 is the number of elements visible in the list
  max-height: ${3*5}rem;
  overflow-y: auto;
  overflow-x: hidden;

  &::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 4px;
  }

  &::-webkit-scrollbar-track {
    background: ${({theme:e})=>e.colors.neutral0};
  }

  &::-webkit-scrollbar-thumb {
    background: ${({theme:e})=>e.colors.neutral150};
    border-radius: ${({theme:e})=>e.borderRadius};
    margin-right: 10px;
  }
`,E=({children:e,source:t,spacing:r,fullWidth:o,placement:n,centered:l,...c})=>s.jsx(_.Portal,{children:s.jsx(p,{source:t,spacing:r,fullWidth:o,placement:n,centered:l,children:s.jsx(b,{...c,children:e})})});exports.Content=p;exports.POPOVER_PLACEMENTS=O;exports.Popover=E;exports.Scrolling=b;
